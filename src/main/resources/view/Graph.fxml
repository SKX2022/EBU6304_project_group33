<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.text.Text?>

<BorderPane xmlns="http://javafx.com/javafx/8"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.finance.controller.GraphController"
            prefHeight="800.0" prefWidth="1200.0"
            styleClass="root"
            stylesheets="@../css/style.css">
    <top>
        <fx:include source="NavigationBar.fxml"/>
    </top>

    <center>
        <HBox alignment="TOP_CENTER" style="-fx-padding: 30;" HBox.hgrow="ALWAYS">
            <VBox alignment="TOP_CENTER" HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS" maxWidth="900"> <padding>
                <Insets top="0" left="0" right="0" bottom="0"/> </padding>

                <HBox alignment="CENTER_LEFT" spacing="20">
                    <Label text="收支情况" styleClass="label-title"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <HBox alignment="CENTER_RIGHT"
                          styleClass="classification-box"
                          onMouseClicked="#submitDateRange"
                          style="-fx-cursor: hand;">
                        <padding>
                            <Insets top="8" bottom="8" left="15" right="15"/>
                        </padding>
                        <!--<Label text="1 Jan 2024 - 30 Dec 2024" styleClass="label-data"/>-->
                        <ComboBox fx:id="Year0" promptText="开始年" styleClass="combo-box"/>
                        <ComboBox fx:id="Month0" promptText="月" styleClass="combo-box"/>
                        <ComboBox fx:id="Day0" promptText="日" styleClass="combo-box"/>
                        <Text text="至" styleClass="label-data"/>
                        <ComboBox fx:id="Year1" promptText="结束年" styleClass="combo-box"/>
                        <ComboBox fx:id="Month1" promptText="月" styleClass="combo-box"/>
                        <ComboBox fx:id="Day1" promptText="日" styleClass="combo-box"/>
                        <Button fx:id="submit" onAction="#submitDateRange"
                                styleClass="classification-box"
                                text="提交"/>
                    </HBox>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="30" styleClass="classification-box">
                    <padding>
                        <Insets top="10" bottom="10" left="20" right="20"/>
                    </padding>
                    <HBox alignment="CENTER_LEFT" spacing="5">
                        <Circle radius="5" fill="#FF6B6B"/>
                        <Label text="Expenditure" styleClass="label-data"/>
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="5">
                        <Circle radius="5" fill="#4CAF50"/>
                        <Label text="Income" styleClass="label-data"/>
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="5">
                        <Circle radius="5" fill="#4A90E2"/>
                        <Label text="Surplus" styleClass="label-data"/>
                    </HBox>
                </HBox>

                <LineChart fx:id="financeLineChart"
                           HBox.hgrow="ALWAYS" VBox.vgrow="ALWAYS"
                           styleClass="classification-box">
                    <xAxis>
                        <CategoryAxis label="" fx:id="xAxis" animated="false"/>
                    </xAxis>
                    <yAxis>
                        <NumberAxis label="" fx:id="yAxis"
                                    lowerBound="0" upperBound="40000" tickUnit="10000" animated="false"/>
                    </yAxis>
                </LineChart>

                <Button onAction="#analyzeAndSuggest"
                        alignment="CENTER_LEFT"
                        styleClass="classification-box ai-button"
                        text="AI 分析收支情况并给出储蓄建议等">
                    <graphic>
                        <ImageView fitHeight="24" fitWidth="24">
                            <image>
                                <Image url="@../images/logo.png"/>
                            </image>
                        </ImageView>
                    </graphic>
                    <padding>
                        <Insets top="15" bottom="15" left="20" right="20"/>
                    </padding>
                </Button>
            </VBox>
        </HBox>
    </center>
</BorderPane>